<div class="household-dashboard-container">
  @if (isLoaded()) {
    <!-- Header Section -->
    <header class="dashboard-header">
      <div class="header-content">
        <div class="header-text">
          <h1 class="dashboard-title">
            <i class="pi pi-home" aria-hidden="true"></i>
            Dashboard Gospodarstwa
          </h1>
          <p class="dashboard-subtitle">{{ pageSubtitle }}</p>
        </div>

        <!-- Household Info -->
        <div class="header-info">
          <div class="info-item">
            <span class="info-label">ID Gospodarstwa</span>
            <span class="info-value">{{ householdId() }}</span>
          </div>
        </div>
      </div>
    </header>

    <p-divider></p-divider>

    <!-- Navigation Tiles Section -->
    <section class="dashboard-content">
      <div class="content-header">
        <h2 class="section-title">Szybka nawigacja</h2>
        <p class="section-description">
          Wybierz jedną z poniższych sekcji, aby zarządzać gospodarstwem
        </p>
      </div>

      <app-navigation-tiles
        [tiles]="navigationTiles()"
        (tileClick)="onTileClick($event)">
      </app-navigation-tiles>
    </section>

    <!-- Dashboard Widgets Section -->
    <section class="dashboard-widgets">
      <!-- Date Range Selector -->
      <div class="widget-header">
        <h2 class="section-title">Nadchodzące wydarzenia</h2>
        <app-date-range-selector
          [selectedDays]="selectedDays()"
          (rangeChange)="onDateRangeChange($event)">
        </app-date-range-selector>
      </div>

      <!-- Week Calendar View -->
      <div class="widget-calendar">
        <app-week-calendar-view
          [events]="filteredEvents()"
          (eventClick)="onEventClick($event)"
          (weekChange)="onWeekChange($event)">
        </app-week-calendar-view>
      </div>

      <p-divider></p-divider>

      <!-- Event Filters Toolbar -->
      <app-event-filters-toolbar
        [users]="[]"
        [categories]="[]"
        (filtersChange)="onFiltersChange($event)">
      </app-event-filters-toolbar>

      <!-- Events List -->
      <div class="widget-events-list">
        <app-dashboard-events-list
          [events]="filteredEvents()"
          [loading]="eventsLoading()"
          (eventClick)="onEventClick($event)"
          (actionClick)="onActionClick($event)">
        </app-dashboard-events-list>
      </div>
    </section>

    <!-- Event Details Dialog -->
    <app-event-details-dialog
      [visible]="eventDialogVisible()"
      (visibleChange)="eventDialogVisible.set($event)"
      [event]="selectedEvent()"
      (action)="onEventAction($event)">
    </app-event-details-dialog>
  } @else {
    <!-- Loading state -->
    <div class="loading-container">
      <p-message
        severity="info"
        text="Ładowanie danych gospodarstwa..."
        [closable]="false">
      </p-message>
    </div>
  }
</div>
